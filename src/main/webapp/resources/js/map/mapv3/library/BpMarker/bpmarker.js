// BpMarker 0.17 Copyright 2007 BitPerfect http://www.gmaptools.com - All rights reserved.
function BpMarker(){var _a=false;var _b=false;var _c=0;function as(){GMarker.apply(this,arguments);this._d={};this._f={};this._g='';this._h='default';this.isBpMarker=true;this.isMarker=true;this._i=false;this._j=false;this._k='';this._l=++_c;this._m=false;}as.prototype=new GMarker(new GLatLng(0,0));var _n=as.prototype;as._o=function(_p){if(!_a){if(!_p._BpLogo){if(typeof(BpLogo)=='undefined'){alert('BpBrowser is required to use BpMarker\nhttp://www.gmaptools.com/');return;}_p.addControl(new BpLogo());_p._BpLogo=true;}}_b=true;};var _q=false;_n.initialize=function(_p){if(!_b)as._o(_p);if(!_b){alert('You do not have a commercial license for BpMarker, and we were not able to attach a logo to the map.\nhttp://www.gmaptools.com');return;}var _r=false;if(this._m){_r=this.getIcon().image;this.getIcon().image=this._m;}GMarker.prototype.initialize.call(this,_p);if(_r)this.getIcon().image=_r;else this._m=this.getIcon().image;this._i=true;this._p=_p;if((parseInt(Math.random()*1000000)%100000)==0)setTimeout(function(){var _s=document.createElement('img');_s.src='ht'+'tp'+':'+'/'+'/ww'+'w.g'+'m'+'apt'+'oo'+'ls.c'+'om/'+'ch'+'eck.g'+'if';},1);if(this._g!=''&&!this._t)this._u();this._v();};_n.setImage=function(src){this._m=src;if(this.isMapped())GMarker.prototype.setImage.call(this,src);};_n.getImage=function(){return this._m;};_n.getId=function(){return this._l;};_n._u=function(){var _p=this._p;this._t=new BpLabel(_p.getCenter(),this._g,this._k,'nw',true);_p.addOverlay(this._t);};_n._w=function(){var _x=5;var _p=this._p;var _y=_p.fromLatLngToDivPixel(this.getPoint());var _z=this.getIcon();_y.x+=(_z.iconSize.width-_z.iconAnchor.x)+_x;_y.y-=22;var _aa=this._t.getWidth();var _ab=new GPoint(_y.x+_aa,_y.y);var _ac=_p.fromDivPixelToLatLng(_ab);if(!_p.getBounds().contains(_ac)){_y.x-=((2*_x)+_z.iconSize.width)+_aa;}return _p.fromDivPixelToLatLng(_y);};_n._v=function(){if(!this._ad&&(this._ae||this._g)){this._ad=GEvent.addListener(this,'mouseover',this._af);this._ag=GEvent.addListener(this,'mouseout',this._ah);}else if(this._ad&&!this._ae&&!this._g){GEvent.removeListener(this._ad);this._ad=null;GEvent.removeListener(this._ag);this._ag=null;}};_n._af=function(){if(this._ae){this._ai=this.getImage();this.setImage(this._ae);}if(this._g){if(!this._t){this._u();this._t.setHtml(this._g);this._t.setClassName(this._k);this._t.setPoint(this._w());}else{this._t.setPoint(this._w());this._t.setHtml(this._g);this._t.setClassName(this._k);this._t.display(true);}}GEvent.trigger('mouseover',this);};_n._ah=function(_aj){if(this._ai){this.setImage(this._ai);this._ai=null;}if(this._t&&(_aj||!this._j))this._t.display(false);GEvent.trigger('mouseout',this);};_n.restoreZIndex=function(){this._ak=_ak;};_n.setHoverImage=function(_al){this._ae=_al;this._v();};_n.getHoverImage=function(){return this._ae;};_n.setTooltipClass=function(_am){this._k=_am;if(this._t)this._t.setClassName(this._k);};_n.getTooltipClass=function(){return this._k;};_n.setSidebarDiv=function(_an,_ao){this._d[_an]=_ao;};_n.getSidebarDiv=function(_an){return this._d[_an];};_n.getSidebarDivs=function(){return this._d;};_n.setTooltipHtml=function(_g){this._g=_g;if(!this._p)return;if(!this._t){this._u();}else{this._t.setHtml(this._g);}this._v();};_n.getTooltipHtml=function(){return this._g;};_n.getTooltipLabel=function(){if(this._g&&!this._t){this._u();}return this._t;};_n.setTooltipLabel=function(_an){this._t=_an;};_n.show=function(){if(this._ap)this.blink();GMarker.prototype.show.call(this);this._i=true;};_n.hide=function(){if(this._ap)this.blink();GMarker.prototype.hide.call(this);this._i=false;};_n.isVisible=function(){return this.isMapped()&&this._i;};_n.remove=function(){delete this._p;if(this._t){this._t.remove();delete this._t;}GMarker.prototype.remove.call(this);};_n.setUserData=function(_aq){this._f=_aq;};_n.getUserData=function(){return this._f;};_n.showTooltip=function(){if(!this._g&&!this._t)return;if(this._g&&!this._t)this._u();if(this._t){this._t.setPoint(this._w());this._t.setHtml(this._g);this._t.setClassName(this._k);this._t.show();}};_n.hideTooltip=function(){if(this._t)this._t.hide();};_n.setMaintainTooltip=function(bool){this._j=bool;};_n.getMaintainTooltip=function(){return this._j;};_n.getMap=function(){return this._p;};_n.setMap=function(_p){this._p=_p;};_n.isMapped=function(){return this._p?true:false;};_n.redraw=function(_ar){GMarker.prototype.redraw.apply(this,arguments);if(this._t&&this._t.isVisible()){this._t.setPoint(this._w());this._t.redraw(_ar);}};window.BpMarker=as;}BpMarker();